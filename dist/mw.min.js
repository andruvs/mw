/**
 * ModalWindow 2.4
 * JQuery plugin for creating modal windows
 * https://github.com/andruvs/mw
 *
 * Copyright 2016-2017, Andrew Golovchak
 *
 * Released on: December 9, 2017
 */

(function(d){if(!d.mw){var e=function(a){this._options=d.extend({content:"",src:"",width:"auto",height:"auto",position:"auto",offset:50,theme:"",title:!0,closeContent:!0,closeDelay:0,open:null,load:null,close:null,update:null},a);this.id="";this.id="string"===typeof this._options.id&&""!==this._options.id?this._options.id:""+Math.round(1E6*Math.random());this._options.zIndex=0;this._options.closeDelay=parseFloat(this._options.closeDelay);if(isNaN(this._options.closeDelay)||0>this._options.closeDelay)this._options.closeDelay=
0;this._loading=this._opened=!1;this.$mw=d('<div class="mw mw_id_'+this.id+'" />').hide();"string"===typeof this._options.theme&&""!==this._options.theme&&this.$mw.addClass("mw_theme_"+this._options.theme);this.$inner=d('<div class="mw__inner" />').appendTo(this.$mw);this.$title=d('<div class="mw__title" />').appendTo(this.$inner);this.$close=d('<div class="mw__close" />').appendTo(this.$inner);this.$content=d('<div class="mw__content" />').appendTo(this.$inner);this.$loading=d('<div class="mw__loading" />').appendTo(this.$inner);
var b=this;this.$close.on("click.mw",function(){b.close()});this.title(this._options.title);this.closeContent(this._options.closeContent);this.on("open",this._options.open);this.on("load",this._options.load);this.on("close",this._options.close);this.on("update",this._options.update)};e.prototype.content=function(a){if("undefined"!==typeof a)this._options.content=a,this._opened&&this.load();else return this._options.content};e.prototype.src=function(a){if("undefined"!==typeof a)this._options.src=a,
this._opened&&this.load();else return this._options.src};e.prototype.title=function(a){if("undefined"!==typeof a)!1===a?this.$title.hide():("string"===typeof a?(this._options.title=a,this.$title.html(a)):a instanceof jQuery&&(this._options.title=a,this.$title.empty().append(a)),this.$title.show());else return this._options.title};e.prototype.closeContent=function(a){if("undefined"!==typeof a)!1===a?this.$close.hide():("string"===typeof a?(this._options.closeContent=a,this.$close.html(a)):a instanceof
jQuery&&(this._options.closeContent=a,this.$close.empty().append(a)),this.$close.show());else return this._options.closeContent};e.prototype.zIndex=function(a){if("undefined"!==typeof a)a=parseInt(a),isNaN(a)||(this._options.zIndex=a,this.$mw.css("z-index",a));else return this._options.zIndex};e.prototype.theme=function(){return this._options.theme};e.prototype.element=function(){return this.$mw};e.prototype.open=function(a,b){d.mw.open(this,a,b)};e.prototype._open=function(a,b){if(!this._opened){this._opened=
!0;0===this.$mw.parent().length&&this.$mw.appendTo("body");this.load(a,b);this.$mw.show();var c=this;setTimeout(function(){c.$mw.addClass("mw_opened");c.$mw.trigger("open",[c,a])},1);this.update()}};e.prototype.close=function(){d.mw.close(this)};e.prototype._close=function(){if(this._opened){this._opened=!1;this.$mw.removeClass("mw_opened");var a=this;setTimeout(function(){a.$mw.hide();if(a._options.content instanceof jQuery){var b=d('.mw-placeholder[data-mw="'+this.id+'"]');0<b.length&&b.replaceWith(a._options.content)}a.$mw.trigger("close",
[a])},1E3*this._options.closeDelay)}};e.prototype.load=function(a,b){d.isPlainObject(b)||(b={});if("string"===typeof this._options.src&&""!==this._options.src){this.loading(!0);!0===b.clear&&this.$content.empty();var c=this;this.$content.load(this._options.src,a,function(){c.loading(!1);c.update();c.$mw.trigger("load",[c,a])})}else"string"===typeof this._options.content?(this.$content.html(this._options.content),this.update(),this.loading(!1),this.$mw.trigger("load",[this,a])):this._options.content instanceof
jQuery&&0===this._options.content.closest(".mw").length&&(this._options.content.replaceWith('<div class="mw-placeholder" data-mw="'+this.id+'" />'),this.$content.empty().append(this._options.content),this.update(),this.loading(!1),this.$mw.trigger("load",[this,a]))};e.prototype.loading=function(a){!0===a?(this._loading=!0,this.$loading.show(),this.$mw.addClass("mw_loading")):!1===a&&(this._loading=!1,this.$loading.hide(),this.$mw.removeClass("mw_loading"));return this._loading};e.prototype.opened=
function(){return this._opened};e.prototype.update=function(){if(this._opened){var a=d(window).width();var b=d(window).height();if(d.isPlainObject(this._options.offset)){var c=parseInt(this._options.offset.x);var e=parseInt(this._options.offset.y)}else c=e=parseInt(this._options.offset);if(isNaN(c)||0>c)c=0;if(isNaN(e)||0>e)e=0;"auto"===this._options.width?this.$mw.css("width",""):this.$mw.css("width",this._options.width);var f=this.$mw.outerWidth();f+2*c>a&&(f=a-2*c);this.$mw.css("width",f);"auto"===
this._options.height?(this.$mw.css("height",""),"fixed"===this._options.position?(c=Math.min(b-2*e,this.$mw.outerHeight()),this.$mw.css("height",c)):c=this.$mw.outerHeight()):(this.$mw.css("height",this._options.height),c=this.$mw.outerHeight());f=(a-f)/2;b=(b-c)/2;b<e&&(b=e);"fixed"===this._options.position?this.$mw.css({position:"fixed",left:f+"px",top:b+"px"}):(b+=d(window).scrollTop(),this.$mw.css({position:"absolute",left:f+"px",top:b+"px"}));this.$mw.trigger("update",[this])}};e.prototype.on=
function(a,b){if("string"===typeof a&&d.isFunction(b))this.$mw.on(a,b);return this};e.prototype.off=function(a,b){"string"===typeof a&&this.$mw.off(a,b);return this};var f=function(){this.$overlay=d('<div class="mw-overlay" />');this._defaults=null;this._mw={};this._stack=[];this._startZIndex=3E3;this._zIndex=null;this._closeDisabled=!1;var a=this;this.$overlay.on("click.mw",function(){a.closeAll()});d(window).on("resize.mw",function(){var b;for(b in a._mw){var c=a._mw[b];c.opened()&&c.update()}})};
f.prototype.startZIndex=function(a){a=parseInt(a);isNaN(a)||(this._startZIndex=a)};f.prototype.defaults=function(a){d.isPlainObject(a)?this._defaults=d.extend({},a):this._defaults=null;return this};f.prototype.add=function(a){d.isPlainObject(a)&&(null!==this._defaults&&(a=d.extend(d.extend({},this._defaults),a)),a=new e(a));a instanceof e&&"string"===typeof a.id&&""!==a.id&&(this._mw.hasOwnProperty(a.id)||(this._mw[a.id]=a));return this};f.prototype.get=function(a,b){if("string"===typeof a&&""!==
a)if(this._mw.hasOwnProperty(a))a=this._mw[a];else{var c=d('[data-mw="'+a+'"]');0<c.length&&(this.add({id:a,content:c}),this._mw.hasOwnProperty(a)&&(a=this._mw[a]))}a instanceof e||(a=null);if("undefined"===typeof b)return a;null!==a&&d.isFunction(b)&&b.call(a.element(),a);return this};f.prototype.open=function(a,b,c){a=this.get(a);if(null===a||a.opened())return this;d.isPlainObject(c)||(c={});null===this._zIndex&&(this._zIndex=this._startZIndex);this._stack.push(a);this._showOverlay();a.zIndex(this._zIndex+
1);a._open(b,c);this._zIndex+=2;if(!0===c.close&&(a=this._stack.length,1<a))for(;0<--a;)this.close(this._stack[0]);return this};f.prototype.close=function(a){if(this._closeDisabled)return this;a=this.get(a);if(null===a||!a.opened())return this;for(var b=this._stack.length;-1<--b&&a!==this._stack[b];);a._close();if(-1<b&&(this._stack.splice(b,1),b=this._stack.length,0<b))return this._zIndex=this._stack[b-1].zIndex()-1,this._showOverlay(),this._zIndex+=2,this;this._zIndex=this._startZIndex;this._hideOverlay();
return this};f.prototype.closeAll=function(){if(this._closeDisabled)return this;var a;for(a in this._mw){var b=this._mw[a];b.opened()&&b._close()}this._stack.length=0;this._zIndex=this._startZIndex;this._hideOverlay();return this};f.prototype.disableClose=function(){this._closeDisabled=!0;return this};f.prototype.enableClose=function(){this._closeDisabled=!1;return this};f.prototype._showOverlay=function(){var a="",b=this._stack.length;0<b&&(a=this._stack[b-1].theme(),"string"===typeof a&&""!==a&&
(a="mw-overlay_theme_"+a));""!==a?this.$overlay.hasClass(a)||this.$overlay.removeClass().addClass("mw-overlay "+a):this.$overlay.removeClass().addClass("mw-overlay");0===this.$overlay.parent().length&&this.$overlay.appendTo("body");this.$overlay.css("z-index",this._zIndex);this.$overlay.hasClass("mw-overlay_opened")?this.$overlay.show():this.$overlay.addClass("mw-overlay_opened").fadeIn()};f.prototype._hideOverlay=function(){this.$overlay.removeClass("mw-overlay_opened").fadeOut()};d.mw=new f}})(jQuery);